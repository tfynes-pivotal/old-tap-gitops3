apiVersion: v1
kind: Secret
metadata:
  name: cm-overlay
  namespace: tap-install
stringData:
  cm-overlay.yaml: |
    #@ load("@ytt:overlay", "overlay")
    #@ tapguins = overlay.subset({"metadata":{"namespace":"tap-gui"}})
    #@ pods = overlay.subset({"kind":"Pod"})
    #@overlay/match by=overlay.or_op(tapguins, pods), expects="0+"
    ---
    spec:
      #@overlay/match by=overlay.all, expects="0+"
      serviceAccount: "tap-gui"
      serviceAccountName: "tap-gui"
apiVersion: v1
kind: Secret
metadata:
  name: cm-tap-gui-sa-overlay
  namespace: tap-install
stringData:
  cm-tap-gui-sa-overlay.yaml: |
    #@ load("@ytt:overlay", "overlay")
    #@ def addImagePullSecret():
    #@overlay/match missing_ok=True
    imagePullSecrets:
    #@overlay/append
    - name: private-registry-credentials
    #@ end


   #! #@overlay/match by=overlay.subset({"kind":"ServiceAccount","metadata":{"name":"tap-gui", "namespace": "tap-gui-dummy"}}), expects="0+"
   #! --- 
   #! #@ addImagePullSecret()

   #! #@overlay/match by=overlay.subset({"metadata":{"name":"tap-gui"},"kind":"ServiceAccount"}), expects="0+"
   #! #@ add_orphan_annotation()